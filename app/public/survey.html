<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Survey Page</title>

    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

</head>

<body>

    <div class="container">

        <div class="jumbotron">
            <h2>Survey Questions</h2>
            <hr>
            <br>

            <div class="row">
                <div class="col-lg-12">

                    <!-- Reservation Page -->
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-heading">About You</h3>
                        </div>
                        <div class="panel-body">

                            <form role="form">

                                <div class="form-group">
                                    <label for="reserve-name">Name (Required)</label>
                                    <input type="text" class="form-control" id="friend-name">
                                </div>

                                <div class="form-group">
                                    <label for="reserve-phone">Link to Photo (Required)</label>
                                    <input type="text" class="form-control" id="friend-photo">
                                    <hr>
                                </div>
                                <div class="form-group">
                                    <h3 class="panel-heading">Question 1</h3>
                                    <label for="exampleFormControlSelect1">Your mind is always buzzing with unexplored ideas and plans.</label>
                                    <select class="form-control survey-number">
                                        <option>1 (Strongly Disagree)</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5 (Strongly Agree)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <h3 class="panel-heading">Question 2</h3>
                                    <label for="exampleFormControlSelect1">Generally speaking, you rely more on your experience than your imagination.</label>
                                    <select class="form-control survey-number">
                                        <option>1 (Strongly Disagree)</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5 (Strongly Agree)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <h3 class="panel-heading">Question 3</h3>
                                    <label for="exampleFormControlSelect1">You find it easy to stay relaxed and focused even when there is some pressure.</label>
                                    <select class="form-control survey-number">
                                        <option>1 (Strongly Disagree)</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5 (Strongly Agree)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <h3 class="panel-heading">Question 4</h3>
                                    <label for="exampleFormControlSelect1">You rarely do something just out of sheer curiosity.</label>
                                    <select class="form-control survey-number">
                                        <option>1 (Strongly Disagree)</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5 (Strongly Agree)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <h3 class="panel-heading">Question 5</h3>
                                    <label for="exampleFormControlSelect1">People can rarely upset you.</label>
                                    <select class="form-control survey-number">
                                        <option>1 (Strongly Disagree)</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5 (Strongly Agree)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <h3 class="panel-heading">Question 6</h3>
                                    <label for="exampleFormControlSelect1">It is often difficult for you to relate to other people’s feelings.</label>
                                    <select class="form-control survey-number">
                                        <option>1 (Strongly Disagree)</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5 (Strongly Agree)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <h3 class="panel-heading">Question 7</h3>
                                    <label for="exampleFormControlSelect1">In a discussion, truth should be more important than people’s sensitivities.</label>
                                    <select class="form-control survey-number">
                                        <option>1 (Strongly Disagree)</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5 (Strongly Agree)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <h3 class="panel-heading">Question 8</h3>
                                    <label for="exampleFormControlSelect1">You rarely get carried away by fantasies and ideas.</label>
                                    <select class="form-control survey-number">
                                        <option>1 (Strongly Disagree)</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5 (Strongly Agree)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <h3 class="panel-heading">Question 9</h3>
                                    <label for="exampleFormControlSelect1">You think that everyone’s views should be respected regardless of whether they are supported
                                        by facts or not.
                                    </label>
                                    <select class="form-control survey-number" id="9">
                                        <option>1 (Strongly Disagree)</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5 (Strongly Agree)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <h3 class="panel-heading">Question 10</h3>
                                    <label for="exampleFormControlSelect1">You feel more energetic after spending time with a group of people.</label>
                                    <select class="form-control survey-number" id="10">
                                        <option>1 (Strongly Disagree)</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5 (Strongly Agree)</option>
                                    </select>
                                </div>
                                <br>
                                <button type="button" data-toggle="modal" data-target="#myModal" id="myButton" class="btn btn-primary submit">Submit</button>
                            </form>

                        </div>
                    </div>

                </div>
            </div>


            <footer class="footer">
                <div class="container">
                    <p>
                        <a href="/api/tables">API Friends List</a> |
                        <a href="https://github.com/afhaque/HotRestaurant">GitHub Repo</a>
                    </p>
                </div>
            </footer>

            <div class="modal" tabindex="-1" role="dialog">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Modal title</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>Modal body text goes here.</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary">Save changes</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>

</body>

</html>

<!-- BELOW CODE IS CRITICAL. IT HANDLES HOW FORM DATA IS SENT TO OUR SERVER -->
<script type="text/javascript">
    // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
    // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
    // Our api recognizes the route (/api/tables)... and then runs the associated code (found in api-routes.js).
    // In this case the associated code "saves" the data to the table-data.js file or waitinglist-data.js file
    var scores = [];
    //console.log(classes);
    //console.log(classes);
    $("#myButton").on("click", function (event) {
        event.preventDefault();
        $('.modal').modal('show')

        var classesNodeList = document.querySelectorAll(".survey-number");
        var classes = Array.prototype.map.call(classesNodeList, function (element) {
            return element.value
        });
        var newClass = [];
        var newScore = [];
        for (var i = 0; i < 10; i++) {
            newClass[i] = classes[i].slice(0, 2);
            newScore[i] = parseInt(classes[i], 10);
            //console.log(newClass)
            //classes = parseInt(classes[i]);
        }
        // Here we grab the form elements
        var currentFriend = {
            friendName: $("#friend-name").val().trim(),
            friendPhoto: $("#friend-photo").val().trim(),
            scores: newScore
        };

        console.log(currentFriend);
    });
</script>